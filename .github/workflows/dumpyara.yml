name: Dummy

on:
  push:
    paths-ignore:
      - '*.md'
    branches: [ master ]

defaults:
  run:
    shell: bash

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
       - name: Checkouts
         uses: actions/checkout@v2

       - name: Clone Android_tools
         run: |
              if [ -f "private.txt" ]
              then
                  git clone --depth=1 --single-branch https://github.com/saurajbot/phoenix_firmware_dumper.git -b private
              else
                  git clone --depth=1 --single-branch https://github.com/noobyysauraj/android_tools
              fi

                                                  
       - name: Setup Dumpyara environment
         working-directory: android_tools
         run: |
              chmod +x setup.sh
              sudo bash setup.sh
              
       - name: Setup config envs And Begin Dump
         working-directory: android_tools       
         run: |
              GITHUB_ORG_NAME="something6969"
              GITLAB_ORG_NAME="sauraj-dumps"
              GITLAB_USERNAME="ksauraj"
              GITHUB_USERNAME="saurajbot"
              GIT_CONFIG_USERNAME="saurajbot"
              GIT_CONFIG_EMAIL="rommirrorer@gmail.com"
              GIT_TOKEN="${{ secrets.GIT_GITHUB_TOKEN }}"
              GITLAB_TOKEN="${{ secrets.GITLAB_TOKEN }}"
              TG_API="${{ secrets.TG_BOT_TOKEN }}"
              TG_CHAT_ID="@saurajdumps"
              GITLAB_HOSTNAME="gitlab.com" ## use 'gitlab.com' by default, or use your own github instance, or any public one
              git config --global user.name "$GIT_CONFIG_USERNAME"
              git config --global user.email "$GIT_CONFIG_EMAIL"
              export GIT_TOKEN=$(GIT_TOKEN)
              export TG_API=$(TG_API)
              git clone "$ROM_URL" source
              ./tools/dummy_dt.sh source
                         
##########
env:
  ROM_URL: https://gitlab.com/sauraj-dumps/redmi_biloba_dump_16416.git
